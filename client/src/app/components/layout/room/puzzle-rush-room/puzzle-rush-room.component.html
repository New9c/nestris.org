<div class="root" *ngIf="state$ | async as state"
[ngClass]="{
    'incorrect': false
}">


    <app-xp-status />

    <div class="content">

        <header>
            <h1 class="title">PUZZLE RUSH</h1>
        </header>

        <p class="instructions">
            Solve as many puzzles as you can in 3 minutes, but 3 strikes and you're out!
        </p>

        <div class="main-row">

            <!-- show undo button if in puzzle solving mode and can undo -->
            <app-outline-button class="undo-button" label="Undo"
            [ngStyle]="{visibility: true ? 'visible' : 'hidden'}" />

            <ng-container *ngIf="currentPuzzle$ | async as currentPuzzle">

                <!-- If before game, show ready button -->
                <app-nes-board *ngIf="state.status === PuzzleRushStatus.BEFORE_GAME"
                    class="board" [scale]="3.3"
                    [gameOver]="GameOverMode.READY"
                    [gameOverShowNext]="true"
                    (clickNext)="puzzleRushRoom.sendReadyEvent()"
                />

                <ng-container *ngIf="state.status === PuzzleRushStatus.DURING_GAME">

                    <!-- If in countdown, show countdown -->
                    <app-nes-board *ngIf="puzzleRushRoom.countdownTimer.time$ | async as time; else duringGame"
                        class="board" [scale]="3.3"
                        [countdown]="time"
                    />

                    <ng-template #duringGame>
                        <!-- If in game, show current puzzle -->
                        <app-puzzle-nes-board *ngIf="state.status === PuzzleRushStatus.DURING_GAME"
                            class="board" [scale]="3.3" [level]="18" [puzzle]="currentPuzzle"
                        />
                    </ng-template>

                </ng-container>
                

            </ng-container>

    

            <div class="puzzle-details">

                <div class="puzzle-details-top">
                    

                </div>
                
                <div class="puzzle-details-bottom">

                    <!-- If in puzzle solution mode and has next puzzle, show "Next Puzzle" button -->
                    <app-solid-button
                        label="Skip Puzzle" [color]="ButtonColor.RED"
                        [stretch]="true"
                        [loadingSize]="15"
                    />
                </div>

            </div>

            <!-- spacer purposes -->
            <app-outline-button class="undo-button" label="Undo"
            [ngStyle]="{visibility: 'hidden'}" />

        </div>

        <div class="bottom"></div>

    </div>

</div>